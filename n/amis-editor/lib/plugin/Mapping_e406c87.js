amis.define("d367d12",(function(e,a,t,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("849c8c1"),n=e("8ba532b"),r=e("fb32b1a"),b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(a,"rendererName",{enumerable:!0,configurable:!0,writable:!0,value:"mapping"}),Object.defineProperty(a,"$schema",{enumerable:!0,configurable:!0,writable:!0,value:"/schemas/MappingSchema.json"}),Object.defineProperty(a,"name",{enumerable:!0,configurable:!0,writable:!0,value:r.i18n("9da188491dd34c4382a5b9f006194e41")}),Object.defineProperty(a,"isBaseComponent",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"description",{enumerable:!0,configurable:!0,writable:!0,value:r.i18n("ddeeaa33ae62ead1a77a859fb79b78d7")}),Object.defineProperty(a,"docLink",{enumerable:!0,configurable:!0,writable:!0,value:"/amis/zh-CN/components/mapping"}),Object.defineProperty(a,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[r.i18n("027446c2f9070b0f5b16a18208bf5fc7")]}),Object.defineProperty(a,"icon",{enumerable:!0,configurable:!0,writable:!0,value:"fa fa-exchange"}),Object.defineProperty(a,"pluginIcon",{enumerable:!0,configurable:!0,writable:!0,value:"mapping-plugin"}),Object.defineProperty(a,"scaffold",{enumerable:!0,configurable:!0,writable:!0,value:{type:"mapping",value:2,map:{1:"开心",2:"愤怒",3:"伤心",4:"冷漠","*":"一般"},itemSchema:{type:"tag",label:"${item}"}}}),Object.defineProperty(a,"previewSchema",{enumerable:!0,configurable:!0,writable:!0,value:l.__assign({},a.scaffold)}),Object.defineProperty(a,"panelTitle",{enumerable:!0,configurable:!0,writable:!0,value:r.i18n("9da188491dd34c4382a5b9f006194e41")}),Object.defineProperty(a,"panelJustify",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"panelBodyCreator",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=/\/field\/\w+$/.test(e.path);return[n.getSchemaTpl("tabs",[{title:r.i18n("24d67862f87f439db7ca957aecb77cce"),body:n.getSchemaTpl("collapseGroup",[{title:r.i18n("4092ed98e9035652d4c9ca9441701ed7"),body:[t?{type:"tpl",inline:!1,className:"text-info text-sm",tpl:"<p>当前为字段内容节点配置，选择上层还有更多配置</p>"}:null,n.getSchemaTpl("mapSourceControl"),{type:"ae-switch-more",mode:"normal",label:"自定义显示模板",bulk:!1,name:"itemSchema",formType:"extend",form:{body:[{type:"button",level:"primary",size:"sm",block:!0,onClick:a.editDetail.bind(a,e.id),label:"配置显示模板"}]},pipeIn:function(e){return void 0!==e},pipeOut:function(e,t,i){return!0===e?{type:"tag",label:"${".concat(a.getDisplayField(i),' | default: "-"}')}:e||void 0}},n.getSchemaTpl("valueFormula",{pipeOut:function(e){return null==e||""===e?void 0:e}}),n.getSchemaTpl("placeholder",{pipeIn:n.defaultValue("-"),label:r.i18n("4c1cff4d8c05daa6ed9352a241ee628c")})]},n.getSchemaTpl("status")])},{title:r.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),body:n.getSchemaTpl("collapseGroup",[{title:r.i18n("261bba7ad82914e477f4b37f6a83874e"),body:[n.getSchemaTpl("className",{label:r.i18n("5e5d3f13111593b2710673006d4c8297")})]}])}])]}}),a}return l.__extends(a,e),Object.defineProperty(a.prototype,"getDisplayField",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a;return e.source||e.map&&Array.isArray(e.map)&&e.map[0]&&Object.keys(e.map[0]).length>1?null!==(a=e.labelField)&&void 0!==a?a:"label":"item"}}),Object.defineProperty(a.prototype,"filterProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e=n.JSONPipeOut(e)}}),Object.defineProperty(a.prototype,"buildEditorToolbar",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t=e.id,i=e.info;e.schema,"mapping"===i.renderer.name&&a.push({icon:"fa fa-expand",order:100,tooltip:"配置显示模板",onClick:this.editDetail.bind(this,t)})}}),Object.defineProperty(a.prototype,"buildEditorContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t=e.id;e.schema,e.region;var i=e.info;e.selections.length||(null==i?void 0:i.plugin)!==this||"mapping"===i.renderer.name&&a.push("|",{label:"配置显示模板",onSelect:this.editDetail.bind(this,t)})}}),Object.defineProperty(a.prototype,"editDetail",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,t=this.manager,i=t.store,b=i.getNodeById(e),o=i.getValueOf(e);b&&o&&this.manager.openSubEditor({title:"配置显示模板",value:o.itemSchema||{type:"tag",label:"${".concat(this.getDisplayField(o),"}")},slot:{type:"container",body:"$$"},onChange:function(e){e=l.__assign(l.__assign({},o),{itemSchema:e}),t.panelChangeValue(e,n.diff(o,e))},data:(a={},a[o.labelField||"label"]=r.i18n("6cb01692eea2fa7066d20fe2b6ccaea3"),a[o.valueField||"value"]=r.i18n("6cb01692eea2fa7066d20fe2b6ccaea3"),a.item=r.i18n("6cb01692eea2fa7066d20fe2b6ccaea3"),a)})}}),a}(n.BasePlugin);n.registerEditorPlugin(b),a.MappingPlugin=b}));