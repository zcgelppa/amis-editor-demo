amis.define("0c53033",(function(e,a,t,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("849c8c1"),l=e("cc4bbf0"),o=e("8ba532b"),i=e("4cd9fa4"),c=e("fb32b1a");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=d(l),f={body:{type:"tpl",tpl:"---"}};function p(e){if(!e)return{trs:[]};for(var a=[],t=0,r=0,n=e.trs||[];r<n.length;r++){for(var l=0,o=0,i=n[r].tds||[];o<i.length;o++){for(var c=i[o];a[t]&&a[t][l];)l+=1;var d=c.rowspan||1,b=c.colspan||1;if(d>1||b>1)for(var f=0;f<d;f++){var p=t+f;a[p]||(a[p]=[]);for(var s=0;s<b;s++){var u=l+s;a[p][u]=!0}}c.$$row=t,c.$$col=l,l+=1}t+=1}return e}var s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(a,"rendererName",{enumerable:!0,configurable:!0,writable:!0,value:"table-view"}),Object.defineProperty(a,"$schema",{enumerable:!0,configurable:!0,writable:!0,value:"/schemas/TableViewSchema.json"}),Object.defineProperty(a,"name",{enumerable:!0,configurable:!0,writable:!0,value:c.i18n("175e01917d9d4891a40eab43f4487030")}),Object.defineProperty(a,"isBaseComponent",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"icon",{enumerable:!0,configurable:!0,writable:!0,value:"fa fa-columns"}),Object.defineProperty(a,"pluginIcon",{enumerable:!0,configurable:!0,writable:!0,value:"table-view-plugin"}),Object.defineProperty(a,"description",{enumerable:!0,configurable:!0,writable:!0,value:c.i18n("9fe8304dade75a37bc04f45515688325")}),Object.defineProperty(a,"docLink",{enumerable:!0,configurable:!0,writable:!0,value:"/amis/zh-CN/components/table-view"}),Object.defineProperty(a,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[c.i18n("22c799040acdb2601b437ed5449de076")]}),Object.defineProperty(a,"scaffold",{enumerable:!0,configurable:!0,writable:!0,value:{type:"table-view",trs:[{background:"#F7F7F7",tds:[{body:{type:"tpl",tpl:c.i18n("2560b304e691da78ee2e02f5af9b494d")}},{body:{type:"tpl",tpl:c.i18n("f7d29dfae05b5d049b64b040b14d9a00")}},{body:{type:"tpl",tpl:c.i18n("44e7ebb4007104495dcb7afbbb6778fb")}}]},{tds:[{rowspan:2,body:{type:"tpl",tpl:c.i18n("3f0cb8b8c238c3b4e08898ce6d449c8d")}},{body:{type:"tpl",tpl:c.i18n("692e92669c0ca340eff4fdcef32896ee")}},{body:{type:"tpl",tpl:"${beijing}"}}]},{tds:[{body:{type:"tpl",tpl:c.i18n("b8b75a5f9109919ff3f67b336b62afe9")}},{body:{type:"tpl",tpl:"${tianjing}"}}]}]}}),Object.defineProperty(a,"previewSchema",{enumerable:!0,configurable:!0,writable:!0,value:n.__assign({},a.scaffold)}),Object.defineProperty(a,"regions",{enumerable:!0,configurable:!0,writable:!0,value:[{key:"body",label:c.i18n("132a78bdf68d6d17bde00aa807bbf032"),renderMethod:"renderTdBody",preferTag:c.i18n("027446c2f9070b0f5b16a18208bf5fc7")}]}),Object.defineProperty(a,"panelTitle",{enumerable:!0,configurable:!0,writable:!0,value:c.i18n("175e01917d9d4891a40eab43f4487030")}),Object.defineProperty(a,"panelBody",{enumerable:!0,configurable:!0,writable:!0,value:[o.getSchemaTpl("tabs",[{title:c.i18n("24d67862f87f439db7ca957aecb77cce"),className:"p-none",body:[o.getSchemaTpl("collapseGroup",[{title:c.i18n("4092ed98e9035652d4c9ca9441701ed7"),body:[o.getSchemaTpl("layout:originPosition",{value:"left-top"}),o.getSchemaTpl("caption"),{label:c.i18n("3a8647306ee6456517b7bf9c8bc7de23"),name:"captionSide",type:"button-group-select",size:"sm",mode:"row",className:"ae-buttonGroupSelect--justify",visibleOn:"this.caption",options:[{label:c.i18n("c949729cd1a1e425595c1a297649c7c6"),value:"top"},{label:c.i18n("12c4c5e8abda77e1fdc93653d6414187"),value:"bottom"}]},{type:"input-text",label:c.i18n("d1c2b2d68063b4a57af61e3027861cd8"),name:"width",clearable:!0},{type:"input-text",label:c.i18n("b32ec25f2bdf7b2eed5e947cf82a4fde"),name:"padding",clearable:!0},{label:c.i18n("8a42ded5c9d58f3dd9e3a8968ec04b34"),name:"border",type:"switch",mode:"row",inputClassName:"inline-flex justify-between flex-row-reverse"},{label:c.i18n("9b4bae5d8251de0b6f00b704936b00d3"),type:"input-color",name:"borderColor",visibleOn:"this.border",pipeIn:o.defaultValue("#eceff8")}]}])]},{title:c.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),className:"p-none",body:o.getSchemaTpl("collapseGroup",n.__spreadArray(n.__spreadArray([],o.getSchemaTpl("style:common"),!0),[{title:c.i18n("4434b33a8731a73613ba5fa1eb984efb"),body:[o.getSchemaTpl("className")]}],!1))},{title:c.i18n("3fea7ca76cdece641436d7ab0d02ab1b"),body:[o.getSchemaTpl("visible")]}])]}),Object.defineProperty(a,"fieldWrapperResolve",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(a,"overrides",{enumerable:!0,configurable:!0,writable:!0,value:{renderTd:function(e,a,t){var r=this.super(e,a,t),n=this.props.$$editor;if(!n||!e.$$id)return r;var l=n.plugin,i=e.$$id;return b.default.createElement(o.VRenderer,{type:n.type,plugin:n.plugin,renderer:n.renderer,key:i,$schema:"/schemas/TdObject.json",hostId:n.id,memberIndex:a,name:"".concat("单元格 ".concat(t+1,",").concat(a+1)),id:i,draggable:!1,wrapperResolve:l.fieldWrapperResolve,schemaPath:"".concat(n.schemaPath,"/td"),path:"".concat(this.props.$path,"/tr/").concat(t,"/td/").concat(a),data:this.props.data,children:r})},renderTr:function(e,a){var t=this.super(e,a),r=this.props.$$editor;if(!r||!e.$$id)return t;var n=r.plugin,l=e.$$id;return b.default.createElement(o.VRenderer,{type:r.type,plugin:r.plugin,renderer:r.renderer,key:l,$schema:"/schemas/TrObject.json",hostId:r.id,memberIndex:a,name:"".concat("行 ".concat(a+1)),id:l,draggable:!1,wrapperResolve:n.fieldWrapperResolve,schemaPath:"".concat(r.schemaPath,"/tr"),path:"".concat(this.props.$path,"/tr/").concat(a),data:this.props.data,children:t})}}}),Object.defineProperty(a,"tdVRendererConfig",{enumerable:!0,configurable:!0,writable:!0,value:{panelTitle:c.i18n("1ebd0cd417700f3f4a7ee5f64518fcd1"),panelBodyCreator:function(e){return[o.getSchemaTpl("tabs",[{title:c.i18n("24d67862f87f439db7ca957aecb77cce"),className:"p-none",body:[o.getSchemaTpl("collapseGroup",[{title:c.i18n("4d775d4cd79e2ed6a2fc66fd1e7139c8"),body:[{label:c.i18n("2f97db95d75280bfedc5afa72d2c717d"),type:"input-color",name:"background"},{label:c.i18n("7ec907e7059b758ace2f3adb9bb803ff"),type:"input-color",name:"color"},{label:c.i18n("104711e38d3cd9335dbd1f4301178edb"),name:"bold",type:"switch",mode:"row",inputClassName:"inline-flex justify-between flex-row-reverse"}]},{title:c.i18n("5aefca559c5a41d10078e21e6d616825"),body:[{type:"input-text",label:c.i18n("65194da33aa3aa1d0fd08b5690af6f26"),name:"width",clearable:!0},{type:"input-number",name:"padding",label:c.i18n("fbd9998b10e690230b0f2fa9b24087ac")},{label:c.i18n("98d695d6a6a48cfb4bc2f6396ee64787"),name:"align",type:"button-group-select",size:"sm",mode:"row",className:"ae-buttonGroupSelect--justify",options:[{label:"",value:"left",icon:"fa fa-align-left"},{label:"",value:"center",icon:"fa fa-align-center"},{label:"",value:"right",icon:"fa fa-align-right"},{label:"",value:"justify",icon:"fa fa-align-justify"}]},{label:c.i18n("11b7fc50778c89572391ec4c6c4b55e1"),name:"valign",type:"button-group-select",size:"sm",mode:"row",className:"ae-buttonGroupSelect--justify",options:[{label:c.i18n("c949729cd1a1e425595c1a297649c7c6"),value:"top"},{label:c.i18n("0bbc2ea4e1d1f23feb576de5dca1ce3b"),value:"middle"},{label:c.i18n("12c4c5e8abda77e1fdc93653d6414187"),value:"bottom"},{label:c.i18n("ed97c73866617b40a7b1215867e0f489"),value:"baseline"}]},{type:"input-number",name:"colspan",label:c.i18n("4745afe0f89f665e41adf819da5df1b6")},{type:"input-number",name:"rowspan",label:c.i18n("7c2e1f863e86715e892f61a54e558b20")}]}])]},{title:c.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),className:"p-none",body:o.getSchemaTpl("collapseGroup",o.getSchemaTpl("style:common"))}])]}}}),Object.defineProperty(a,"trVRendererConfig",{enumerable:!0,configurable:!0,writable:!0,value:{panelTitle:c.i18n("d17020cd3e6564f5154cf2251cd30f52"),panelBodyCreator:function(e){return[o.getSchemaTpl("tabs",[{title:c.i18n("24d67862f87f439db7ca957aecb77cce"),body:[{label:c.i18n("5a431ad16d8f7f23fac3be5650e51caa"),type:"input-number",name:"height"},{label:c.i18n("db439b129f3143e14a7024f08ea3732d"),type:"input-color",name:"background"}]},{title:c.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),className:"p-none",body:o.getSchemaTpl("collapseGroup",o.getSchemaTpl("style:common"))}])]}}}),a}return n.__extends(a,e),Object.defineProperty(a.prototype,"renderRenderer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a=e.$$editor.renderer,t=e.$schema;return p(t),b.default.createElement(i.TableViewEditor,{schema:t,manager:this.manager},b.default.createElement(a.component,n.__assign({},e)))}}),Object.defineProperty(a.prototype,"buildEditorPanel",{enumerable:!1,configurable:!0,writable:!0,value:function(a,t){e.prototype.buildEditorPanel.call(this,a,t);var r=this.manager.store;a.info.schemaPath.endsWith("/td")?t.push({key:"td",order:100,icon:this.tdVRendererConfig.panelIcon||"fa fa-tablet",pluginIcon:this.pluginIcon,title:this.tdVRendererConfig.panelTitle||c.i18n("30d6ed36667cb98165f07c59702754ea"),render:this.manager.makeSchemaFormRender({controls:this.tdVRendererConfig.panelControlsCreator?this.tdVRendererConfig.panelControlsCreator(a):this.tdVRendererConfig.panelControls,body:this.tdVRendererConfig.panelBodyCreator?this.tdVRendererConfig.panelBodyCreator(a):this.tdVRendererConfig.panelBody,panelById:r.activeId})}):a.info.schemaPath.endsWith("/tr")&&t.push({key:"tr",order:100,icon:this.trVRendererConfig.panelIcon||"fa fa-tablet",title:this.trVRendererConfig.panelTitle||c.i18n("30d6ed36667cb98165f07c59702754ea"),render:this.manager.makeSchemaFormRender({controls:this.trVRendererConfig.panelControlsCreator?this.trVRendererConfig.panelControlsCreator(a):this.trVRendererConfig.panelControls,body:this.trVRendererConfig.panelBodyCreator?this.trVRendererConfig.panelBodyCreator(a):this.trVRendererConfig.panelBody,panelById:r.activeId})})}}),Object.defineProperty(a.prototype,"insertRow",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t=this.manager.store,r=t.getNodePathById(e),n=r[r.length-3].id,l=t.getSchema(n);p(l);var i=o.JSONGetById(l,e);if(i){var d=i.$$row;"below"===a&&(d+=1);var b=l.trs[0],s=b.tds[b.tds.length-1];if(s){for(var u=s.$$col+(s.colspan||1),h=l.trs.length,m=0;m<l.trs.length;m++)for(var g=0,y=l.trs[m].tds||[];g<y.length;g++){var v=y[g],w=v.$$row,C=v.rowspan||1,$=v.colspan||1;if(C>1)w+C>d&&(v.rowspan=C+1,u-=$);if(w===d){h=m;break}}for(var P=[],j=0;j<u;j++)P.push(f);l.trs.splice(h,0,{tds:P}),this.manager.store.changeValueById(n,l)}else console.warn(c.i18n("013326241579b9b2735756f2204bf8bc"))}else console.warn(c.i18n("49d45317662097180e27fa53235d9b13"))}}),Object.defineProperty(a.prototype,"insertCol",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t=this.manager.store,r=t.getNodePathById(e),n=r[r.length-3].id,l=t.getSchema(n);p(l);var i=o.JSONGetById(l,e);if(i){var d=i.$$col;"right"===a&&(d+=1);for(var b=0,s=l.trs||[];b<s.length;b++){for(var u=s[b].tds||[],h=!1,m=0;m<u.length;m++){var g=u[m],y=g.colspan||1,v=g.$$col;if(y>1)if(v+y>d){g.colspan=y+1,h=!0;break}if(d<=v){u.splice(m,0,f),h=!0;break}}h||u.push(f)}this.manager.store.changeValueById(n,l)}else console.warn(c.i18n("49d45317662097180e27fa53235d9b13"))}}),Object.defineProperty(a.prototype,"splitCell",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a=this.manager.store,t=a.getNodePathById(e),r=t[t.length-3].id,n=a.getSchema(r);p(n);var l=o.JSONGetById(n,e);if(l){var i=l.rowspan||1,d=l.colspan||1;l.colspan=1,l.rowspan=1;for(var b=l.$$row,s=l.$$col,u=[],h=0;h<i;h++)for(var m=0;m<d;m++)0===h&&0===m||u.push({row:b+h,col:s+m});u.sort((function(e,a){return a.col-e.col}));for(var g=0,y=n.trs;g<y.length;g++)for(var v=y[g],w=0;w<v.tds.length;w++)for(var C=v.tds[w],$=C.$$row,P=C.$$col,j=u.length;j--;){var O=u[j];$===O.row&&(O.col<=P?v.tds.splice(w,0,f):v.tds.push(f),u.splice(j,1))}if(u.length){var R=[];for(h=0;h<u.length;h++)R.push(f);n.trs.push({tds:R})}this.manager.store.changeValueById(r,n)}else console.warn(c.i18n("49d45317662097180e27fa53235d9b13"))}}),Object.defineProperty(a.prototype,"buildEditorToolbar",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t=this,r=e.schema;if(e.info.schemaPath.endsWith("/td")){var n=r.$$id;a.push({icon:"fa fa-chevron-left",order:100,tooltip:c.i18n("a896691b72032fe21a00b6487381a529"),onClick:function(){t.insertCol(n,"left")}}),a.push({icon:"fa fa-chevron-down",order:100,tooltip:c.i18n("24e4bbbf29a8d31e711c8d9366bf1a6f"),onClick:function(){t.insertRow(n,"below")}}),a.push({icon:"fa fa-chevron-up",order:100,tooltip:c.i18n("aea2dd682bc9dc2974dd971581148459"),onClick:function(){t.insertRow(n,"above")}}),a.push({icon:"fa fa-chevron-right",order:100,tooltip:c.i18n("bac058b86f8fd4e8f5e2ef3807799aea"),onClick:function(){t.insertCol(n,"right")}});var l=r.colspan||1,o=r.rowspan||1;(l>1||o>1)&&a.push({icon:"fa fa-columns",order:100,tooltip:c.i18n("488d0742c010851e9c6ce3264df9542b"),onClick:function(){t.splitCell(n)}})}}}),a}(o.BasePlugin);o.registerEditorPlugin(s),a.TableViewPlugin=s}));