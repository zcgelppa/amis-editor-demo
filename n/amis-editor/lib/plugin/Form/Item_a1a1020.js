amis.define("fb70899",(function(e,a,t,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("849c8c1"),l=e("8ba532b"),r=e("345ea29"),o=e("8beedab"),d=e("fb32b1a");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=c(r),m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(a,"panelTitle",{enumerable:!0,configurable:!0,writable:!0,value:d.i18n("55b45c73ae417c4dead67905b1550e85")}),Object.defineProperty(a,"order",{enumerable:!0,configurable:!0,writable:!0,value:-990}),Object.defineProperty(a,"pluginIcon",{enumerable:!0,configurable:!0,writable:!0,value:"form-plugin"}),Object.defineProperty(a,"panelBodyCreator",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var a=e.schema.type||"",t=o.SUPPORT_STATIC_FORMITEM_CMPTS.includes(a),n=~["button","submit","reset"].indexOf(a),r=~["button-toobar","container","fieldSet","group","grid","hbox","input-group","panel","service","tabs","table","elevator","static"].indexOf(a),c=~["switch","wizard","diff-editor","editor","input-rating","input-text","textarea"].indexOf(a),b=!!~["input-group"].indexOf(a),m=e.info.renderer;return[l.getSchemaTpl("tabs",[{title:d.i18n("22b777e6fcb613b8ba83ced9594cd07e"),body:[l.getSchemaTpl("layout:originPosition",{value:"left-top"}),n?null:l.getSchemaTpl("formItemName",{required:!r}),!1!==m.renderLabel?l.getSchemaTpl("label"):null,c?l.getSchemaTpl("switch",{name:"readOnly",label:d.i18n("973b69af999dbdf4fa124df8c928ca6e")}):null,l.getSchemaTpl("switch",{name:"disabled",label:d.i18n("710ad08b11419332713360d2750cd707"),mode:"horizontal",horizontal:{justify:!0,left:8},inputClassName:"is-inline "}),b?null:l.getSchemaTpl("required"),l.getSchemaTpl("description"),l.getSchemaTpl("placeholder"),l.getSchemaTpl("remark",{mode:"row"}),!1!==m.renderLabel?l.getSchemaTpl("labelRemark",{mode:"row"}):null]},{title:d.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),body:i.__spreadArray([l.getSchemaTpl("formItemMode"),l.getSchemaTpl("horizontalMode"),l.getSchemaTpl("horizontal",{label:"",visibleOn:'data.mode == "horizontal" && data.label !== false && data.horizontal'}),!1!==m.sizeMutable?l.getSchemaTpl("formItemSize"):null,l.getSchemaTpl("formItemInline"),l.getSchemaTpl("className"),l.getSchemaTpl("className",{label:d.i18n("6d0034a2419e1f394dedab07994b9665"),name:"labelClassName"}),l.getSchemaTpl("className",{label:d.i18n("2cadb6621afe19333b142faa541b0f91"),name:"inputClassName"}),l.getSchemaTpl("className",{label:d.i18n("0e627e6a0ff773ee76bc4cc0871cb48d"),name:"descriptionClassName",visibleOn:"this.description"})],t?[l.getSchemaTpl("className",{label:d.i18n("3e573fd37473d789211ee44335d82fad"),name:"staticClassName"})]:[],!0)},{title:d.i18n("33bf801796fd255b5f6147e33146669b"),body:[l.getSchemaTpl("disabled"),l.getSchemaTpl("visible"),t?l.getSchemaTpl("static"):null,l.getSchemaTpl("switch",{name:"clearValueOnHidden",label:d.i18n("7abf78a41095c6d21a1cc89b4a876233")})]},b?null:{title:d.i18n("cd8992b644e6c18367861a4d913fd116"),body:[l.getSchemaTpl("validations"),l.getSchemaTpl("validationErrors"),l.getSchemaTpl("validateOnChange"),l.getSchemaTpl("submitOnChange"),l.getSchemaTpl("api",{name:"validateApi",label:d.i18n("1040279cf7b8dbdb842f597c30095f62"),description:d.i18n("133886b10fd9721e6cf91b76f2df5b6e")})]}])]}}),a}return i.__extends(a,e),Object.defineProperty(a.prototype,"buildEditorPanel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t=e.info.renderer,n=this.manager.store;if(!e.selections.length){var i=e.info.plugin;e.info.hostId||!(null==t?void 0:t.isFormItem)||(null==i?void 0:i.notRenderFormZone)||a.push({key:"form-item",icon:"fa fa-desktop",pluginIcon:this.pluginIcon,title:this.panelTitle,render:this.manager.makeSchemaFormRender({body:this.panelBodyCreator(e),panelById:n.activeId,formKey:"form-item"}),order:-200})}}}),Object.defineProperty(a.prototype,"afterUpdate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,t,n=e.context;if(/\$/.test(n.info.renderer.name)&&(null===(a=n.diff)||void 0===a?void 0:a.some((function(e){var a;return"value"===(null===(a=e.path)||void 0===a?void 0:a.join("."))})))){var i=b.default(n.diff,(function(e){var a;return"value"===(null===(a=e.path)||void 0===a?void 0:a.join("."))})),l=null===(t=this.manager.store.getNodeById(n.id))||void 0===t?void 0:t.getComponent();null==l||l.props.onChange(null==i?void 0:i.rhs)}}}),Object.defineProperty(a.prototype,"beforeReplace",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a=e.context;a.info.renderer.isFormItem&&a.data&&a.subRenderer&&!~a.subRenderer.tags.indexOf(d.i18n("55b45c73ae417c4dead67905b1550e85"))&&~a.subRenderer.tags.indexOf(d.i18n("027446c2f9070b0f5b16a18208bf5fc7"))&&(a.data=i.__assign(i.__assign({},a.data),{type:"static-".concat(a.data.type),label:a.data.label||a.schema.label,name:a.data.name||a.schema.name})),a.schema&&(a.data.name=a.schema.name||a.data.name)}}),Object.defineProperty(a.prototype,"buildEditorContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t=this;e.id,e.schema,e.region;var n=e.selections;if(n.length&&!(n.length>3)){var r=n.concat(),o=r.shift().node.parent;r.some((function(e){var a;return e.node.parent!==o||!(null===(a=e.info.renderer)||void 0===a?void 0:a.isFormItem)}))||a.unshift({label:d.i18n("b95c6e14a4d8f6a6c6d99d583916f327"),icon:"merge-icon",onSelect:function(){var e=t.manager.store,a=n.concat(),r=a.shift(),o=e.schema,d=[i.__assign({},r.schema)];delete d[0].$$id,a.forEach((function(e){d.push(e.node.schema),o=l.JSONDelete(o,e.id)}));var c=l.JSONPipeIn({type:"group",body:d});o=l.JSONUpdate(o,r.id,c,!0),e.traceableSetSchema(o),setTimeout((function(){e.setActiveId(r.id)}),40)}},"|")}}}),a}(l.BasePlugin);l.registerEditorPlugin(m),a.ItemPlugin=m}));