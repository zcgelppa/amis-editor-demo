amis.define("2c77c6d",(function(e,a,n,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("849c8c1"),r=e("167c905"),i=e("cc4bbf0"),o=e("8ba532b"),c=e("fb32b1a");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(i),b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(a,"rendererName",{enumerable:!0,configurable:!0,writable:!0,value:"grid"}),Object.defineProperty(a,"$schema",{enumerable:!0,configurable:!0,writable:!0,value:"/schemas/GridSchema.json"}),Object.defineProperty(a,"name",{enumerable:!0,configurable:!0,writable:!0,value:c.i18n("2820712cac089483cf2b4a0c939fc780")}),Object.defineProperty(a,"isBaseComponent",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"description",{enumerable:!0,configurable:!0,writable:!0,value:c.i18n("9e17d57a0ba39254a75c0265aa3063ca")}),Object.defineProperty(a,"docLink",{enumerable:!0,configurable:!0,writable:!0,value:"/amis/zh-CN/components/grid"}),Object.defineProperty(a,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[c.i18n("5aefca559c5a41d10078e21e6d616825")]}),Object.defineProperty(a,"order",{enumerable:!0,configurable:!0,writable:!0,value:505}),Object.defineProperty(a,"icon",{enumerable:!0,configurable:!0,writable:!0,value:"fa fa-th"}),Object.defineProperty(a,"pluginIcon",{enumerable:!0,configurable:!0,writable:!0,value:"grid-plugin"}),Object.defineProperty(a,"scaffold",{enumerable:!0,configurable:!0,writable:!0,value:{type:"grid",columns:[{body:[]},{body:[]}]}}),Object.defineProperty(a,"previewSchema",{enumerable:!0,configurable:!0,writable:!0,value:{type:"grid",columns:[{body:[{type:"tpl",tpl:c.i18n("e63907bf0db529e84866d1ae737bfc0d"),inline:!1,className:"bg-light wrapper"}]},{body:[{type:"tpl",tpl:c.i18n("e63907bf0db529e84866d1ae737bfc0d"),className:"bg-light wrapper",inline:!1}]}]}}),Object.defineProperty(a,"panelTitle",{enumerable:!0,configurable:!0,writable:!0,value:c.i18n("9e17d57a0ba39254a75c0265aa3063ca")}),Object.defineProperty(a,"panelWithOutOthers",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"vRendererConfig",{enumerable:!0,configurable:!0,writable:!0,value:{regions:{body:{key:"body",label:c.i18n("132a78bdf68d6d17bde00aa807bbf032"),placeholder:c.i18n("e63907bf0db529e84866d1ae737bfc0d"),wrapperResolve:function(e){return e}}},panelTitle:c.i18n("e63907bf0db529e84866d1ae737bfc0d"),panelBodyCreator:function(e){var n=e.node.host;return[o.getSchemaTpl("tabs",[{title:c.i18n("24d67862f87f439db7ca957aecb77cce"),className:"p-none",body:[o.getSchemaTpl("collapseGroup",[o.getSchemaTpl("layout:originPosition",{value:"left-top"}),{title:c.i18n("9bdb07e72d3a9a6084201a7398523f5a"),body:[{type:"wrapper",size:"none",className:"grid grid-cols-2 gap-4",body:[n.isSecondFactor?null:{children:d.default.createElement(r.Button,{size:"sm",onClick:function(){return a.insertRowAfter(e.node.host)}},d.default.createElement(o.Icon,{className:"icon",icon:"arrow-to-bottom"}),d.default.createElement("span",null,"下方插入新行"))},n.isSecondFactor?null:{children:d.default.createElement(r.Button,{size:"sm",onClick:function(){return a.insertRowBefore(e.node.host)}},d.default.createElement(o.Icon,{className:"icon",icon:"top-arrow-to-top"}),d.default.createElement("span",null,"上方插入新行"))},{children:d.default.createElement(r.Button,{size:"sm",onClick:function(){return a.insertColumnBefore(e)}},d.default.createElement(o.Icon,{className:"icon",icon:"left-arrow-to-left"}),d.default.createElement("span",null,"左侧插入新列"))},{children:d.default.createElement(r.Button,{size:"sm",onClick:function(){return a.insertColumnAfter(e)}},d.default.createElement(o.Icon,{className:"icon",icon:"arrow-to-right"}),d.default.createElement("span",null,"右侧插入新列"))}].filter((function(e){return e}))}]},{title:c.i18n("c28479019e24e0e4745f4948e9e97ee7"),body:[{type:"button-group-select",name:"md",size:"sm",label:!1,pipeIn:function(e){return"number"==typeof e?"manual":e||""},pipeOut:function(e){return"manual"===e?1:e},tiled:!0,options:[{value:"",label:c.i18n("daa0f354e189c0da577ea25be13f874d")},{value:"auto",label:c.i18n("4db804afe5c99f7ca4fe988ada35c77f")},{value:"manual",label:c.i18n("2a3e7f5c382c56faf261a87573658325")}]},{visibleOn:'typeof this.md === "number"',label:c.i18n("d5d885add2551454955bd70411769c88"),type:"input-range",name:"md",min:1,max:12,step:1}]},{title:c.i18n("5aefca559c5a41d10078e21e6d616825"),body:[{type:"button-group-select",name:"valign",size:"sm",label:!1,tiled:!0,clearable:!0,options:[{value:"top",label:c.i18n("2a6ad292447e6354ca39ee7f40d2fcc8")},{value:"middle",label:c.i18n("1cc9a6949b47913462ff832cb684bdde")},{value:"bottom",label:c.i18n("d68c21b6b65e7a2e361762b65b8a5032")},{value:"between",label:c.i18n("da1b972efb29f850b50e219ad4d98ba5")}]}]}])]},{title:c.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),body:[a.panelWithOutOthers?null:o.getSchemaTpl("className",{label:c.i18n("19432e481cefd1bf88fc707f20ea62c5"),name:"columnClassName"})]}])]}}}),Object.defineProperty(a,"vWrapperResolve",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(a,"overrides",{enumerable:!0,configurable:!0,writable:!0,value:{renderColumn:function(e,a,n){var t,l,r=this.super(e,a,n),i=this.props.$$editor;if(i&&e.$$id){var c=i.plugin,u=null===(l=null===(t=c.vRendererConfig)||void 0===t?void 0:t.regions)||void 0===l?void 0:l.body;return u?d.default.createElement(o.VRenderer,{key:"".concat(e.$$id,"-").concat(a),type:i.type,plugin:i.plugin,renderer:i.renderer,$schema:"/schemas/GridColumn.json",hostId:i.id,memberIndex:a,name:"第".concat(a+1,"栏"),id:e.$$id,draggable:!1,schemaPath:"".concat(i.schemaPath,"/grid/").concat(a),wrapperResolve:c.vWrapperResolve,path:"".concat(this.props.$path,"/").concat(a),data:this.props.data,widthMutable:!0},u?d.default.createElement(o.RegionWrapper,{key:u.key,preferTag:u.preferTag,name:u.key,label:u.label,regionConfig:u,placeholder:u.placeholder,editorStore:c.manager.store,manager:c.manager,children:r,wrapperResolve:u.wrapperResolve,rendererName:i.renderer.name}):r):r}return r}}}),a}return l.__extends(a,e),Object.defineProperty(a.prototype,"panelBodyCreator",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a=this,n=e.secondFactor;return[o.getSchemaTpl("tabs",[{title:c.i18n("24d67862f87f439db7ca957aecb77cce"),className:"p-none",body:[o.getSchemaTpl("collapseGroup",[{title:c.i18n("9bdb07e72d3a9a6084201a7398523f5a"),body:[n?null:{type:"wrapper",size:"none",className:"grid grid-cols-2 gap-4 mb-4",body:[{children:d.default.createElement(r.Button,{size:"sm",onClick:function(){return a.insertRowAfter(e.node)}},d.default.createElement(o.Icon,{className:"icon",icon:"arrow-to-bottom"}),d.default.createElement("span",null,"下方插入新行"))},{children:d.default.createElement(r.Button,{size:"sm",onClick:function(){return a.insertRowBefore(e.node)}},d.default.createElement(o.Icon,{className:"icon",icon:"top-arrow-to-top"}),d.default.createElement("span",null,"上方插入新行"))}]}].filter((function(e){return e}))},{title:c.i18n("5aefca559c5a41d10078e21e6d616825"),body:[o.getSchemaTpl("layout:originPosition",{value:"left-top"}),{label:c.i18n("eb22d47f16f92e6f621c2b9d87119303"),name:"columns",type:"select",pipeIn:function(e){return Array.isArray(e)?e.length:void 0},pipeOut:function(e,a){return Array.isArray(a)&&(a.length>e?(a=a.concat()).splice(e-1,a.length-e):a=a.concat(o.repeatArray({body:[]},e-a.length))),a},options:o.repeatArray(null,12).map((function(e,a){return{label:"".concat(a+1),value:a+1}}))},{type:"button-group-select",name:"gap",label:c.i18n("c288b519484207bea1d51884a5e9acaf"),size:"sm",clearable:!0,tiled:!0,options:[{label:c.i18n("d81bb206a889656035b929cd8bb1ef10"),value:"none"},{label:c.i18n("23ecf42cada8bf2715792d718544d107"),value:"xs"},{label:c.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"sm"},{label:c.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"base"},{label:c.i18n("aed1dfbc31703955e64806b799b67645"),value:"md"},{label:c.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"lg"}]},{type:"button-group-select",name:"align",size:"sm",label:c.i18n("98d695d6a6a48cfb4bc2f6396ee64787"),tiled:!0,pipeIn:o.defaultValue("left"),options:[{value:"left",label:c.i18n("413f48cc71f71083ce532a86e3efdc21")},{value:"center",label:c.i18n("1cc9a6949b47913462ff832cb684bdde")},{value:"right",label:c.i18n("fd8e9572cc6bf87653c4d8f8b8dd0db9")},{value:"between",label:c.i18n("da1b972efb29f850b50e219ad4d98ba5")}]},{type:"button-group-select",name:"valign",size:"sm",label:c.i18n("11b7fc50778c89572391ec4c6c4b55e1"),tiled:!0,pipeIn:o.defaultValue("top"),options:[{value:"top",label:c.i18n("2a6ad292447e6354ca39ee7f40d2fcc8")},{value:"middle",label:c.i18n("1cc9a6949b47913462ff832cb684bdde")},{value:"bottom",label:c.i18n("d68c21b6b65e7a2e361762b65b8a5032")},{value:"between",label:c.i18n("da1b972efb29f850b50e219ad4d98ba5")}]}]}])]},this.panelWithOutOthers?null:{title:c.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),body:[o.getSchemaTpl("className"),o.getSchemaTpl("subFormItemMode"),o.getSchemaTpl("subFormHorizontalMode"),o.getSchemaTpl("subFormHorizontal")]}])]}}),Object.defineProperty(a.prototype,"afterResolveJsonSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,n,t=null===(a=e.context.node.parent)||void 0===a?void 0:a.host;(null===(n=null==t?void 0:t.info)||void 0===n?void 0:n.plugin)===this&&e.setData("/schemas/GridColumn.json")}}),Object.defineProperty(a.prototype,"buildEditorContextMenu",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var n,t=this;e.selections.length||(null===(n=e.info)||void 0===n?void 0:n.plugin)!==this||(e.node.isVitualRenderer?(a.push("|"),a.push({label:c.i18n("9cc03fc4b3e87e8410e10357a219b44e"),onSelect:function(){return t.insertColumnBefore(e)}}),a.push({label:c.i18n("6b12fc99e2a46aed982d46b93ac191a0"),onSelect:function(){return t.insertColumnAfter(e)}}),a.push("|"),a.push({label:c.i18n("57ff158884582ed498a87d03aed46146"),onSelect:function(){return t.insertRowBefore(e.node.host)}}),a.push({label:c.i18n("bd63eab86ac0e0b35a06d0f24a098096"),onSelect:function(){return t.insertRowAfter(e.node.host)}})):(a.push("|"),a.push({label:c.i18n("57ff158884582ed498a87d03aed46146"),onSelect:function(){return t.insertRowBefore(e.node)}}),a.push({label:c.i18n("bd63eab86ac0e0b35a06d0f24a098096"),onSelect:function(){return t.insertRowAfter(e.node)}})))}}),Object.defineProperty(a.prototype,"onWidthChangeStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,n,t=e.context,r=t.node;if((null===(a=r.info)||void 0===a?void 0:a.plugin)===this){var i=r.host;if(i&&(null===(n=i.info)||void 0===n?void 0:n.plugin)===this){var o=t.dom,c=o.parentElement;if(c){var u=t.resizer,d=c.getBoundingClientRect(),b=i.schema.columns,f=r.index,s=b[f].md,p=o.getBoundingClientRect();e.setData({onMove:function(e){var a=e.pageX-p.left,n=s=Math.max(1,Math.min(12,Math.round(12*a/d.width)));(b=b.concat())[f]=l.__assign(l.__assign({},b[f]),{md:n}),u.setAttribute("data-value","".concat(n)),i.updateState({columns:b}),requestAnimationFrame((function(){r.calculateHighlightBox()}))},onEnd:function(){i.updateState({},!0),u.removeAttribute("data-value"),r.updateSchema({md:s}),requestAnimationFrame((function(){r.calculateHighlightBox()}))}})}}}}}),Object.defineProperty(a.prototype,"insertRowAfter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,n=this;if((null===(a=e.info)||void 0===a?void 0:a.plugin)===this){var t=this.manager.store,l=t.schema,r=e.id;t.traceableSetSchema(o.JSONChangeInArray(l,r,(function(e,a,t){e.splice(t+1,0,o.JSONPipeIn({type:n.rendererName||"grid",align:a.align,valign:a.valign,columns:a.columns.map((function(e){return{body:[],md:null==e?void 0:e.md}}))}))})))}}}),Object.defineProperty(a.prototype,"insertRowBefore",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,n=this;if((null===(a=e.info)||void 0===a?void 0:a.plugin)===this){var t=this.manager.store,l=t.schema,r=e.id;t.traceableSetSchema(o.JSONChangeInArray(l,r,(function(e,a,t){e.splice(t,0,o.JSONPipeIn({type:n.rendererName||"grid",align:a.align,valign:a.valign,columns:a.columns.map((function(e){return{body:[],md:null==e?void 0:e.md}}))}))})))}}}),Object.defineProperty(a.prototype,"insertColumnBefore",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a;if((null===(a=e.node.info)||void 0===a?void 0:a.plugin)===this){var n=this.manager.store,t=e.id,l=n.schema;n.traceableSetSchema(o.JSONChangeInArray(l,t,(function(e,a,n){e.splice(n,0,o.JSONPipeIn({body:[]}))})))}}}),Object.defineProperty(a.prototype,"insertColumnAfter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a;if((null===(a=e.node.info)||void 0===a?void 0:a.plugin)===this){var n=this.manager.store,t=n.schema,l=e.id;n.traceableSetSchema(o.JSONChangeInArray(t,l,(function(e,a,n){e.splice(n+1,0,o.JSONPipeIn({body:[]}))})))}}}),a}(o.BasePlugin);o.registerEditorPlugin(b),a.GridPlugin=b}));