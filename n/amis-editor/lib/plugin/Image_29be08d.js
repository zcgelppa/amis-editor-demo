amis.define("f299ba1",(function(e,a,t,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("849c8c1"),i=e("8ba532b"),b=e("fb32b1a"),c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(a,"rendererName",{enumerable:!0,configurable:!0,writable:!0,value:"image"}),Object.defineProperty(a,"$schema",{enumerable:!0,configurable:!0,writable:!0,value:"/schemas/ImageSchema.json"}),Object.defineProperty(a,"name",{enumerable:!0,configurable:!0,writable:!0,value:b.i18n("67997ccf7ea846c3c2d278b01ed9600b")}),Object.defineProperty(a,"isBaseComponent",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"description",{enumerable:!0,configurable:!0,writable:!0,value:b.i18n("6dcf991e992a0b765df0933411fe9bb2")}),Object.defineProperty(a,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[b.i18n("027446c2f9070b0f5b16a18208bf5fc7")]}),Object.defineProperty(a,"icon",{enumerable:!0,configurable:!0,writable:!0,value:"fa fa-photo"}),Object.defineProperty(a,"pluginIcon",{enumerable:!0,configurable:!0,writable:!0,value:"image-plugin"}),Object.defineProperty(a,"scaffold",{enumerable:!0,configurable:!0,writable:!0,value:{type:"image"}}),Object.defineProperty(a,"previewSchema",{enumerable:!0,configurable:!0,writable:!0,value:n.__assign(n.__assign({},a.scaffold),{thumbMode:"cover",value:i.mockValue({type:"image"})})}),Object.defineProperty(a,"panelTitle",{enumerable:!0,configurable:!0,writable:!0,value:b.i18n("20def7942674282277c3714ed7ea6ce0")}),Object.defineProperty(a,"panelJustify",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"panelBodyCreator",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var a=/\/field\/\w+$/.test(e.path);return i.getSchemaTpl("tabs",[{title:b.i18n("24d67862f87f439db7ca957aecb77cce"),body:i.getSchemaTpl("collapseGroup",[{title:b.i18n("4092ed98e9035652d4c9ca9441701ed7"),body:[{name:"title",type:"input-text",label:b.i18n("c6c7456d446d62a906c2809b6ba19ce1")},{name:"imageCaption",type:"input-text",label:b.i18n("098c3d959911b48b4d912cb85ccc4942")},{name:"imageMode",label:b.i18n("1fdadb49bcabfdc36a4a9e020f597f4d"),type:"select",pipeIn:i.defaultValue("thumb"),options:[{label:b.i18n("e18aa5e376437da71083a29c4cddaf46"),value:"thumb"},{label:b.i18n("fb43d5ffa21f3c4055c29fad350f27e4"),value:"original"}]},{name:"width",label:b.i18n("c28479019e24e0e4745f4948e9e97ee7"),type:"input-number"},{name:"height",label:b.i18n("c1df04eec5fa0857bc0df2d68d8e953c"),type:"input-number"},a?null:i.getSchemaTpl("imageUrl",{name:"src",type:"input-text",label:b.i18n("582570bef8c57c5af7658c4a4eea45ff"),description:b.i18n("1193e1aab7bea094279ae7b4288ba848")}),{type:"ae-switch-more",mode:"normal",name:"enlargeAble",label:i.tipedLabel("图片放大功能","放大功能和打开外部链接功能是冲突的，若要点击时打开外部链接请先关闭此功能"),value:!1,hiddenOnDefault:!1,formType:"extend",pipeIn:function(e){return!!e},form:{body:[i.getSchemaTpl("imageUrl",{name:"originalSrc",label:b.i18n("7ffade593e390a2a2cc43e6663461b71"),description:b.i18n("214953c5f7557b1a5f1310c87238ee03")})]}},{type:"input-text",label:b.i18n("a3f38735bf211edb2066ac4e51b55cb2"),name:"href",hiddenOn:"this.enlargeAble",clearValueOnHidden:!0},i.getSchemaTpl("imageUrl",{name:"defaultImage",label:i.tipedLabel("占位图",b.i18n("f5865bf2d791d293374af4aa76d27c4d"))})]},i.getSchemaTpl("status")])},{title:b.i18n("afcde2611bdd13c1e65b4fb6a2f13425"),body:i.getSchemaTpl("collapseGroup",[{title:b.i18n("4092ed98e9035652d4c9ca9441701ed7"),body:[{name:"thumbMode",type:"select",label:b.i18n("00cedb73310cc531a43d23cfa5ba0e5f"),mode:"horizontal",labelAlign:"left",horizontal:{left:5,right:7},pipeIn:i.defaultValue("contain"),options:[{label:b.i18n("b0267f4aa776e75443b7ef6e8dad257e"),value:"w-full"},{label:b.i18n("c30b1b6f29debb05449aa3cb40268e7e"),value:"h-full"},{label:b.i18n("e13556bb3580ac3746e1f8663eb15896"),value:"contain"},{label:b.i18n("47303119ba97a66d168ff042575b9de4"),value:"cover"}]},{name:"thumbRatio",type:"button-group-select",label:b.i18n("319501b9acacdd6f94a9bdd0637a3cd2"),size:"sm",pipeIn:i.defaultValue("1:1"),options:[{label:"1:1",value:"1:1"},{label:"4:3",value:"4:3"},{label:"16:9",value:"16:9"}]}]},{title:b.i18n("261bba7ad82914e477f4b37f6a83874e"),body:[i.getSchemaTpl("className",{label:b.i18n("5e5d3f13111593b2710673006d4c8297")}),i.getSchemaTpl("className",{name:"imageClassName",label:b.i18n("20def7942674282277c3714ed7ea6ce0")}),i.getSchemaTpl("className",{name:"thumbClassName",label:b.i18n("0f088d8f579c362068d7a3858e207280")})]}])}])}}),a}return n.__extends(a,e),Object.defineProperty(a.prototype,"onActive",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a,t=e.context;if((null===(a=t.info)||void 0===a?void 0:a.plugin)===this&&t.node){var l=t.node;l.setHeightMutable(!0),l.setWidthMutable(!0)}}}),Object.defineProperty(a.prototype,"onWidthChangeStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.onSizeChangeStart(e,"horizontal")}}),Object.defineProperty(a.prototype,"onHeightChangeStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.onSizeChangeStart(e,"vertical")}}),Object.defineProperty(a.prototype,"onSizeChangeStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t;void 0===a&&(a="both");var l=e.context,n=l.node;if((null===(t=n.info)||void 0===t?void 0:t.plugin)===this){var i=l.resizer,b=l.dom,c=b.parentElement.getBoundingClientRect(),r=b.getBoundingClientRect(),o=l.nativeEvent.pageX,d=l.nativeEvent.pageY;e.setData({onMove:function(e){var t=e.pageY-d,l=e.pageX-o,b=Math.max(50,r.height+t),u=Math.max(100,Math.min(r.width+l,c.width)),f={width:u,height:b};"both"===a?i.setAttribute("data-value","".concat(u,"px x ").concat(b,"px")):"vertical"===a?(i.setAttribute("data-value","".concat(b,"px")),delete f.width):(i.setAttribute("data-value","".concat(u,"px")),delete f.height),n.updateState(f),requestAnimationFrame((function(){n.calculateHighlightBox()}))},onEnd:function(e){var t=e.pageY-d,l=e.pageX-o,b=Math.max(50,r.height+t),u={width:Math.max(100,Math.min(r.width+l,c.width)),height:b};"vertical"===a?delete u.width:"horizontal"===a&&delete u.height,i.removeAttribute("data-value"),n.updateSchema(u),requestAnimationFrame((function(){n.calculateHighlightBox()}))}})}}}),a}(i.BasePlugin);i.registerEditorPlugin(c),a.ImagePlugin=c}));