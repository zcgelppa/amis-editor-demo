amis.define("478f27b",(function(e,a,t,n){"use strict";var l=e("849c8c1"),i=e("8ba532b"),c=e("cc4bbf0"),o=e("167c905"),p=e("520d1e1"),s=e("fb32b1a");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=r(c);i.setSchemaTpl("api",(function(e){void 0===e&&(e={});var a=e.name,t=e.label,n=e.value,i=e.description,c=e.sampleBuilder;e.apiDesc;var p=l.__rest(e,["name","label","value","description","sampleBuilder","apiDesc"]);return l.__assign({type:"container",body:[{type:"checkbox",label:t||"API",labelRemark:c?{label:!1,title:s.i18n("226c06861b0605a3276311b1369204f2"),icon:"fas fa-code",className:"m-l-xs ae-ApiSample-icon",tooltipClassName:"ae-ApiSample-tooltip",children:function(e){return d.default.createElement(o.Html,{className:"ae-ApiSample",inline:!1,html:"\n                  <pre><code>".concat(c(e),"</code></pre>\n                  ")})},trigger:"click",rootClose:!0,placement:"left"}:void 0,option:s.i18n("1f318234cab713b51b5172d91770bc11"),name:a||"api",mode:"inline",className:"w-full m-b-sm",inputClassName:"pull-right text-sm m-t-sm p-t-none",onChange:function(){},pipeIn:function(e){return e&&"string"!=typeof e},pipeOut:function(e,a){var t=o.buildApi(a);return e?{method:t.method,url:t.url}:t.url?"".concat(t.method?"".concat(t.method,":"):"").concat(t.url):""}},{name:a||"api",type:"input-text",value:n,placeholder:"http://",description:i,visibleOn:"!this.".concat(a||"api"," || typeof this.").concat(a||"api"," === 'string'"),className:"m-b-none",labelRemark:{}},{type:"combo",name:a||"api",description:i,syncDefaultValue:!1,multiLine:!0,visibleOn:"this.".concat(a||"api"," && typeof this.").concat(a||"api"," !== 'string'"),className:"m-b-none",messages:{validateFailed:s.i18n("a0472043a9598b1b19f1adcec1e1d75d")},pipeIn:function(e){if("string"==typeof e){var a=e,t="get",n=/^(raw:|external:)?(get|post|put|patch|delete):(.*)$/.exec(a);return n&&(a=n[1]+n[3],t=n[2]),{method:t,url:a}}return e},items:[{label:s.i18n("6aa351f5dacd13d3d862d9c93e4a0241"),name:"method",value:"get",type:"select",mode:"horizontal",horizontal:{leftFixed:"sm"},options:[{value:"get",label:"GET"},{value:"post",label:"POST"},{value:"put",label:"PUT"},{value:"patch",label:"PATCH"},{value:"delete",label:"DELETE"}]},{label:s.i18n("85624c8e8b0fc98954eecbe508e8b59d"),type:"input-text",name:"url",placeholder:"http://",required:!0},{type:"switch",label:s.i18n("dd10fdec63a2224aa3d28b48d428cb98"),name:"data",className:"w-full m-b-xs",pipeIn:function(e){return!!e},pipeOut:function(e){return e?{"&":"$$"}:null}},{type:"tpl",visibleOn:"!this.data",inline:!1,className:"text-sm text-muted m-b",tpl:s.i18n("0fcbf036057c6dd88b7b809daa0c5eb7")},{type:"ae-DataMappingControl",syncDefaultValue:!1,name:"data",mode:"normal",renderLabel:!1,visibleOn:"this.data",valueType:"ae-DataPickerControl",descriptionClassName:"help-block text-xs m-b-none",description:s.i18n("5414824fb8efdb7d59beae4bf95fdefd")},{label:s.i18n("8dc91bca9bc83efea73150e3478657fc"),type:"input-text",name:"sendOn",placeholder:s.i18n("bf9e242338d2c26b182aa6b9c015d84c"),description:s.i18n("91ee84292a5bf5e59d3b6309f948f2f1")},{type:"switch",label:s.i18n("773a0e8384fd6f784088b829d7cc2f68"),name:"cache",className:"w-full m-b-xs",description:s.i18n("2816c3584802b2fc75db5bc3c6aa81e8"),pipeIn:function(e){return!!e},pipeOut:function(e){return e?3e3:void 0}},{type:"input-number",name:"cache",mode:"inline",min:0,step:500,visibleOn:"this.cache",pipeIn:function(e){return"number"==typeof e?e:0}},{type:"switch",label:s.i18n("a18ea11244325dd3d20c5988bc7f6e39"),name:"responseType",pipeIn:function(e){return"blob"===e},pipeOut:function(e){return e?"blob":void 0},description:s.i18n("6e889f0cc8c1d8f705edfd5d0bbdaaa0")},{label:s.i18n("7c6722203327e8173be987f36fadf610"),type:"button-group-select",name:"dataType",description:"".concat(s.i18n("55409342e28d37db86fb23efbd84a025"),'：<%= data.dataType === "json" ? "application/json" : (data.dataType === "form-data" ? "multipart/form-data" : (data.dataType === "form" ? "application/x-www-form-urlencoded" : "")) %>，').concat(s.i18n("e06a14abe7ef66a8ead143db4ae9786e")),size:"sm",className:"block",mode:"inline",options:[{label:"JSON",value:"json"},{label:"FormData",value:"form-data"},{label:"Form",value:"form"}]},{type:"switch",label:s.i18n("91831507074270c0da8a31ad9ff87495"),name:"replaceData",description:s.i18n("508a38f518821a0f6bb2d15269b31ece")},{type:"switch",label:s.i18n("7dd590a9d9e783e980d318bd52891905"),name:"responseData",className:"w-full m-b-xs",pipeIn:function(e){return!!e},pipeOut:function(e){return e?{"&":"$$"}:null}},{type:"tpl",visibleOn:"!this.responseData",inline:!1,className:"text-sm text-muted m-b",tpl:s.i18n("7e295b6ff39ec7356e06c4534bfc4fb3")},{type:"input-kv",syncDefaultValue:!1,name:"responseData",visibleOn:"this.responseData",descriptionClassName:"help-block text-xs m-b-none"},{title:s.i18n("5c131eb3bc61f6b0a26e20449ad7ce56"),type:"fieldSet",className:"m-b-none",size:"sm",collapsable:!1,collapsedOn:"!this.requestAdaptor && !this.adaptor",body:[{name:"requestAdaptor",type:"js-editor",allowFullscreen:!0,label:s.i18n("417125a06b1d2bfff025e83a4e067bf0"),description:s.i18n("62efcb25e5b21da47c09780119da3458")},{name:"adaptor",type:"js-editor",allowFullscreen:!0,label:s.i18n("6eb8944029108ad3b6bb3572a648fafa"),description:s.i18n("e83cbec70e17988749c4a02a3b73f55c")}]}]}]},p)})),i.setSchemaTpl("source",(function(e){return void 0===e&&(e={}),i.getSchemaTpl("api",l.__assign({name:"source",label:s.i18n("1395eba8d9efe27aa1ecd1a45e3e5dcd"),description:s.i18n("f514cabe63553a850063834c9d44a5ee"),sampleBuilder:function(){return JSON.stringify({status:0,msg:"",data:{options:[{label:s.i18n("05f87b331e1c97691776d93a6598373f"),value:"a"},{label:s.i18n("f38c0a46797523b11051e35ec0f82a42"),value:"b"}]}},null,2)}},e))})),i.setSchemaTpl("apiString",{name:"api",type:"input-text",placeholder:"http://"}),i.setSchemaTpl("initFetch",(function(e){void 0===e&&(e={});var a=p.get(e,"visibleOn","this.initApi"),t=p.get(e,"name","initFetch"),n=p.get(e,"label",s.i18n("47d0a7caaa2baee8d38612a1c57421ef"));return{type:"group",label:i.tipedLabel(n,s.i18n("866a60d7fbdfeba6ae42c7e9c7b03059")),visibleOn:a,direction:"vertical",body:[{name:t,type:"radios",inline:!0,onChange:function(){},options:[{label:s.i18n("0a60ac8f02ccd2cf723f927284877851"),value:!0},{label:s.i18n("c9744f45e76d885ae1c74d4f4a934b2e"),value:!1},{label:s.i18n("a9400c408441f1f7f6d6954deb05ae9a"),value:""}]},i.getSchemaTpl("valueFormula",{label:"",name:"".concat(t,"On"),autoComplete:!1,visibleOn:"typeof this.".concat(t,' !== "boolean"'),placeholder:s.i18n("713ec76479b992652ed39364d3d03870"),className:"m-t-n-sm"})]}})),i.setSchemaTpl("proxy",{type:"switch",label:s.i18n("3f4f3acd6968f38361dddc6612a0c54f"),name:"proxy",mode:"horizontal",horizontal:{justify:!0,left:8},inputClassName:"is-inline"}),i.setSchemaTpl("apiControl",(function(e){void 0===e&&(e={});var a=e.name,t=e.label;e.value;var n=e.description,i=e.sampleBuilder;e.apiDesc;var c=l.__rest(e,["name","label","value","description","sampleBuilder","apiDesc"]);return l.__assign({type:"ae-apiControl",label:t,name:a||"api",description:n,labelRemark:i?{label:!1,title:s.i18n("226c06861b0605a3276311b1369204f2"),icon:"fas fa-code",className:"m-l-xs ae-ApiSample-icon",tooltipClassName:"ae-ApiSample-tooltip",children:function(e){return d.default.createElement(o.Html,{className:"ae-ApiSample",inline:!1,html:"\n                  <pre><code>".concat(i(e),"</code></pre>\n                  ")})},trigger:"click",rootClose:!0,placement:"left"}:void 0},c)})),i.setSchemaTpl("interval",(function(e){return void 0===e&&(e={}),l.__assign({type:"ae-switch-more",label:s.i18n("e5e3131aaf96b6dd10574bc9beeaf934"),name:"interval",formType:"extend",bulk:!0,mode:"normal",form:{body:[i.getSchemaTpl("withUnit",{label:s.i18n("8df0f3891f8a80a392816f6ca662a33d"),name:"interval",control:{type:"input-number",name:"interval",value:1e3},unit:s.i18n("21157cbff85802e353409f647f1f1f91")})]}},e)})),i.setSchemaTpl("silentPolling",(function(){return i.getSchemaTpl("switch",{label:i.tipedLabel(s.i18n("19c5410b23fba4bbfd1a58bbd5268c9b"),s.i18n("04f840b0772f4b5d59954a29a76f4e7b")),name:"silentPolling",visibleOn:"!!this.interval"})})),i.setSchemaTpl("stopAutoRefreshWhen",(function(e){return void 0===e&&(e={}),i.getSchemaTpl("valueFormula",l.__assign({name:"stopAutoRefreshWhen",label:i.tipedLabel(s.i18n("83f16354dd1532422dc8b3581d096e7b"),s.i18n("620f826a77f079c5683a9d3c59461ea1")),visibleOn:"!!this.interval"},e))})),i.setSchemaTpl("actionApiControl",(function(e){void 0===e&&(e={});var a=e.name,t=e.label;e.value;var n=e.description,i=e.sampleBuilder,c=l.__rest(e,["name","label","value","description","sampleBuilder"]);return l.__assign({type:"ae-actionApiControl",label:t,name:a,description:n,mode:"normal",labelRemark:i?{icon:"",label:s.i18n("1a63ac23010e0573f7c0a8cd3314b8c6"),title:s.i18n("226c06861b0605a3276311b1369204f2"),tooltipClassName:"ae-ApiSample-tooltip",children:function(e){return d.default.createElement(o.Html,{className:"ae-ApiSample",inline:!1,html:"\n                    <pre><code>".concat(i(e),"</code></pre>\n                    ")})},trigger:"click",className:"m-l-xs",rootClose:!0,placement:"left"}:void 0},c)})),i.setSchemaTpl("loadingConfig",(function(e,a){for(var t=a.context,n="",i=t.node.parent;i&&!n;){var c=i.type;"dialog"===c||"drawer"===c?n="[role=dialog-body]":"page"===c&&(n="[role=page-body]"),i=i.parent}return l.__assign(l.__assign({name:"loadingConfig",type:"select",label:s.i18n("5a4e41af91746f8a3905aa9f66048955"),options:[{label:s.i18n("6ade3082696deb00357f5c0359093cd4"),value:1},{label:s.i18n("b6ac896eff6a6502e4ae7079b3e507a5"),value:0},{label:s.i18n("0e9ffe1f1cf3f7a620970ea75dba9f39"),value:2}]},e),{pipeOut:function(e){switch(e){case 0:return{show:!1};case 2:return{show:!0,root:n};case 1:return{show:!0};default:return{}}},pipeIn:function(e){return void 0===e&&(e={}),e.root?2:!1===e.show?0:1}})}))}));