amis.define("6345ba1",(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("849c8c1"),o=e("cc4bbf0"),i=e("af1cc81"),l=e("3c006bc"),u=e("3c5b02d"),d=e("167c905"),s=e("8ba532b"),c=e("fb32b1a");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p,b=f(o),m=f(i),h=f(l);!function(e){e.Normal="Normal",e.Custom="Custom"}(p||(p={}));var y=function(e){return b.default.createElement(b.default.Fragment,null,b.default.createElement("a",{className:v+"Item-dragBar"},b.default.createElement(d.Icon,{icon:"drag-bar",className:"icon"})),b.default.createElement("span",{className:v+"Item-content"},e.children),b.default.createElement("span",{className:v+"Item-close",onClick:function(t){return e.handleDelete(e.index,t)}},b.default.createElement(d.Icon,{icon:"status-close",className:"icon"})))},v="ae-DateShortCutControl",g=function(e){function t(t){var n,a=this;a=e.call(this,t)||this,Object.defineProperty(a,"sortable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"drag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"target",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"normalDropDownOptionArr",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"customDropDownOptionArr",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var r=t.normalDropDownOption,o=t.customDropDownOption,i=t.data;a.normalDropDownOptionArr=Object.keys(r).map((function(e){return{label:r[e],value:e}})),a.customDropDownOptionArr=Object.keys(o).map((function(e){return{label:o[e],value:e}}));return a.state={options:(null!==(n=null==i?void 0:i.ranges)&&void 0!==n?n:["yesterday","7daysago","prevweek","thismonth","prevmonth","prevquarter"]).map((function(e,t){var n,a=e.match(/^(\d+)[a-zA-Z]+/);return a?{value:a[1],type:p.Custom,inputType:null===(n=e.match(/[a-zA-Z]+/))||void 0===n?void 0:n[0]}:{label:r[e],value:e,type:p.Normal}}))},a}return r.__extends(t,e),Object.defineProperty(t.prototype,"dragRef",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.drag&&e?this.initDragging():this.drag&&!e&&this.destroyDragging(),this.drag=e}}),Object.defineProperty(t.prototype,"scrollToBottom",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;this.drag&&(null===(t=null===(e=this.drag)||void 0===e?void 0:e.lastElementChild)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}}),Object.defineProperty(t.prototype,"initDragging",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=u.findDOMNode(this);this.sortable=new h.default(t.querySelector(".".concat(v,"-content")),{group:"OptionControlGroup",animation:150,handle:".".concat(v,"Item-dragBar"),ghostClass:"".concat(v,"Item-dragging"),onEnd:function(t){if(t.newIndex!==t.oldIndex){var n=t.to;t.newIndex<t.oldIndex&&t.oldIndex<n.childNodes.length-1?n.insertBefore(t.item,n.childNodes[t.oldIndex+1]):t.oldIndex<n.childNodes.length-1?n.insertBefore(t.item,n.childNodes[t.oldIndex]):n.appendChild(t.item);var a=e.state.options.concat();a[t.oldIndex]=a.splice(t.newIndex,1,a[t.oldIndex])[0],e.setState({options:a},(function(){return e.onChangeOptions()}))}}})}}),Object.defineProperty(t.prototype,"destroyDragging",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sortable&&this.sortable.destroy()}}),Object.defineProperty(t.prototype,"renderContent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.state.options;return b.default.createElement("div",{className:v+"-wrapper"},t&&t.length?b.default.createElement("ul",{className:v+"-content",ref:this.dragRef},t.map((function(t,n){return b.default.createElement("li",{className:v+"Item",key:n},t.type===p.Normal?e.renderNormalOption(t,n):e.renderCustomOption(t,n))}))):b.default.createElement("div",{className:v+"-content "+v+"-empty"},"未配置"))}}),Object.defineProperty(t.prototype,"renderNormalOption",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return b.default.createElement(y,{index:t,handleDelete:this.handleDelete},b.default.createElement("span",null,e.label))}}),Object.defineProperty(t.prototype,"renderCustomOption",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,a=this.props.render,o={daysago:{prefix:c.i18n("046c6233e03af774df7b90b4504fa96c"),suffix:c.i18n("249aba763258bbe488af3e79a381d265"),type:"middle"},dayslater:{suffix:c.i18n("2f8ab07bea442bc6ce8a9e99ff88e5c1"),type:"suffix"},weeksago:{prefix:c.i18n("046c6233e03af774df7b90b4504fa96c"),suffix:c.i18n("a657f46f5bb00961adfae80d12e41b3d"),type:"middle"},weekslater:{suffix:c.i18n("b1599eaa05dc9b3d90be5aebc5c84338"),type:"suffix"},monthsago:{prefix:c.i18n("046c6233e03af774df7b90b4504fa96c"),suffix:c.i18n("e42b99d59954ce6437e66f416850425a"),type:"middle"},monthslater:{suffix:c.i18n("3c690347976de82df1909750cbc82b80"),type:"suffix"},quartersago:{prefix:c.i18n("046c6233e03af774df7b90b4504fa96c"),suffix:c.i18n("a483bccf85587055ab31314ad1d2f82a"),type:"middle"},quarterslater:{suffix:c.i18n("b62ba98a627851e911bef8fbb005bd4a"),type:"suffix"},yearsago:{prefix:c.i18n("046c6233e03af774df7b90b4504fa96c"),suffix:c.i18n("465260fe80b0c3338d06194bb7a94446"),type:"middle"},yearslater:{suffix:c.i18n("137bcb84f52bbd48623c37d8dfdebdff"),type:"suffix"}};return b.default.createElement(y,{index:t,handleDelete:this.handleDelete},e.inputType?function(e){return"middle"===e.type?a("inner",{type:"input-text",prefix:null==e?void 0:e.prefix,suffix:e.suffix,mode:"normal",placeholder:"n",value:null==e?void 0:e.value,onChange:function(e){return n.handleCustomItemChange(e,t)}}):a("inner",{type:"input-text",placeholder:"n",mode:"normal",suffix:e.suffix,value:null==e?void 0:e.value,onChange:function(e){return n.handleCustomItemChange(e,t)}})}(r.__assign(r.__assign({},o[e.inputType]),{value:e.value})):null)}}),Object.defineProperty(t.prototype,"handleCustomItemChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,a=r.__spreadArray([],this.state.options,!0);a[t].value=e,this.setState({options:a},(function(){return n.onChangeOptions()}))}}),Object.defineProperty(t.prototype,"addItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,a=this;this.setState({options:r.__spreadArray(r.__spreadArray([],this.state.options,!0),[r.__assign({label:null!==(n=null==e?void 0:e.label)&&void 0!==n?n:"",type:t,value:t===p.Normal?e.value:""},t===p.Normal?{}:{inputType:e.value})],!1)},(function(){a.onChangeOptions(),a.scrollToBottom()}))}}),Object.defineProperty(t.prototype,"handleDelete",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,a=this.state.options.concat();a.splice(e,1),this.setState({options:a},(function(){return n.onChangeOptions()}))}}),Object.defineProperty(t.prototype,"onChangeOptions",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.state.options,t=this.props.onBulkChange,n=[];e.forEach((function(e,t){e.type===p.Normal&&(n[t]=e.value),e.type===p.Custom&&e.value&&(n[t]="".concat(e.value).concat(e.inputType))})),t&&t({ranges:n})}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.props,n=t.className,a=t.label,o=t.render;return b.default.createElement("div",{className:m.default(v,n)},b.default.createElement("header",{className:v+"-header"},b.default.createElement("label",null,a)),this.renderContent(),b.default.createElement("div",{className:v+"-footer"},b.default.createElement("div",{className:v+"-footer-btn"},o("inner",{type:"dropdown-button",label:c.i18n("279d93f2d745ed08e9034022941510dc"),closeOnClick:!0,closeOnOutside:!0,level:"enhance",buttons:this.normalDropDownOptionArr.map((function(t){return r.__assign(r.__assign({},t),{type:"button",onAction:function(n,a){return e.addItem(t,p.Normal)}})}))},{popOverContainer:null})),b.default.createElement("div",{className:v+"-footer-btn"},o("inner",{type:"dropdown-button",label:c.i18n("7a1e5f93e362d371519bcb2bfdb0fc9a"),closeOnClick:!0,closeOnOutside:!0,buttons:this.customDropDownOptionArr.map((function(t){return r.__assign(r.__assign({},t),{type:"button",onAction:function(n,a){return e.addItem(t,p.Custom)}})}))},{popOverContainer:null}))))}}),Object.defineProperty(t,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{label:c.i18n("f7d2996639d97b4a03fc0e40e2eb853a")}}),r.__decorate([s.autobind,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",void 0)],t.prototype,"dragRef",null),r.__decorate([s.autobind,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Number,Object]),r.__metadata("design:returntype",void 0)],t.prototype,"handleDelete",null),t}(b.default.PureComponent);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e),t=r.__decorate([d.FormItem({type:v,renderLabel:!1})],t)}(g),t.DateShortCutControl=g}));