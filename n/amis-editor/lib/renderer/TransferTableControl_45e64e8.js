amis.define("e47602f",(function(e,a,t,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("849c8c1"),o=e("cc4bbf0"),i=e("167c905"),r=e("8ba532b"),d=e("af1cc81"),u=e("fb32b1a");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=c(o),s=c(d);var p,f=function(e,a,t,n){return void 0===t&&(t=!0),void 0===n&&(n=!1),{type:"input-text",name:e,placeholder:a,required:t,unique:n}},h=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return l.__extends(a,e),Object.defineProperty(a.prototype,"addColumns",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,a=this.props.data.columns,t=void 0===a?[{type:"text"}]:a;return{type:"action",actionType:"dialog",label:u.i18n("f86418b525af4b573aed36b8e3f9aeb8"),level:"enhance",dialog:{title:u.i18n("ec159d98c6c25fadd38bcd9362f6a28e"),headerClassName:"font-bold",closeOnEsc:!0,closeOnOutside:!1,showCloseButton:!0,onConfirm:function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];return e.handleChange(a[2].columns,"columns")},body:[{name:"columns",type:"combo",multiple:!0,label:!1,strictMode:!1,addButtonText:u.i18n("0c14e431f1b5ecd163f8fa010a0654c7"),draggable:!1,value:t,items:[{type:"input-text",name:"label",placeholder:u.i18n("32c65d8d7431e76029678ec7bb73a5ab")},{type:"input-text",name:"name",placeholder:u.i18n("41a344642681efaaa418c228ba7fb45c")},{type:"select",name:"type",placeholder:u.i18n("226b0912184333c81babf2f1894ec0c1"),value:"text",options:[{value:"text",label:u.i18n("ffb01e5bcf4c00447f5150d3cba81371")},{value:"tpl",label:u.i18n("59cf15fe6b8d659c9bd2f86143534a06")},{value:"image",label:u.i18n("20def7942674282277c3714ed7ea6ce0")},{value:"date",label:u.i18n("4ff1e74e43a3586339251494117185ad")},{value:"progress",label:u.i18n("c7bff79d059a0b7ff9b02441959d8be2")},{value:"status",label:u.i18n("3fea7ca76cdece641436d7ab0d02ab1b")},{value:"mapping",label:u.i18n("9da188491dd34c4382a5b9f006194e41")},{value:"operation",label:u.i18n("8abc564260a1564521e0c3a1d5419b4a")}]}]}]}}}}),Object.defineProperty(a.prototype,"addRows",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,a=this.props.data,t=a.columns,n=void 0===t?[]:t,o=a.options,i=void 0===o?[{}]:o;return{type:"tooltip-wrapper",tooltip:u.i18n("f302b37cf6530d3fb39234a220d95437"),tooltipTheme:"dark",placement:"top",tooltipStyle:{fontSize:"12px"},className:"ae-formItemControl-label-tip",body:[{type:"action",actionType:"dialog",label:u.i18n("6090f7af1ae15892abe97409b9e557b1"),level:"enhance",disabled:n&&0===n.length,block:!0,dialog:{title:u.i18n("e6a10b831ae920bba1bb89a725e0fbe8"),headerClassName:"font-bold",closeOnEsc:!0,closeOnOutside:!1,showCloseButton:!0,size:n.length>=6?"md":"",onConfirm:function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];return e.handleChange(a[2].options,"options")},body:[{type:"form",wrapWithPanel:!1,mode:"normal",body:[{name:"options",type:"combo",multiple:!0,draggable:!0,addButtonText:u.i18n("66ab5e9f24c8f46012a25c89919fb191"),value:i,items:l.__spreadArray(l.__spreadArray([],n.map((function(e){var a;return f(e.name,null!==(a=e.label)&&void 0!==a?a:"",!1)})),!0),[f("value",u.i18n("fe7509e0ed085b86f07e3e9975cc5b3d"),!0,!0)],!1)}]}]}}]}}}),Object.defineProperty(a.prototype,"handleChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,a){var t,n=this.props.data,o=this.props,i=o.onBulkChange,r=o.onValueChange;if(n[a]=e,"columns"===a){var d=e.map((function(e){return e.name}));n.options=(null!==(t=n.options)&&void 0!==t?t:[]).map((function(e){return l.__assign({},d.reduce((function(a,t){return a[t]=e[t],a}),{value:e.value}))}))}r&&r(a,n,i)}}),Object.defineProperty(a.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){return b.default.createElement("div",{className:"ae-OptionControl-footer"},i.render(this.addColumns()),i.render(this.addRows()))}}),l.__decorate([r.autobind,l.__metadata("design:type",Function),l.__metadata("design:paramtypes",[Array,String]),l.__metadata("design:returntype",void 0)],a.prototype,"handleChange",null),a}(b.default.Component);!function(e){function a(){return null!==e&&e.apply(this,arguments)||this}l.__extends(a,e),a=l.__decorate([i.FormItem({type:"ae-transferTableControl",renderLabel:!1})],a)}((p=h,function(e){function a(a){var t=e.call(this,a)||this;return Object.defineProperty(t,"$comp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"internalProps",{enumerable:!0,configurable:!0,writable:!0,value:["checked","editing"]}),t.state={api:a.data.source,labelField:a.data.labelField,valueField:a.data.valueField,source:a.data.source?"api":"custom"},t.handleSourceChange=t.handleSourceChange.bind(t),t.handleAPIChange=t.handleAPIChange.bind(t),t.handleLableFieldChange=t.handleLableFieldChange.bind(t),t.handleValueFieldChange=t.handleValueFieldChange.bind(t),t.onChange=t.onChange.bind(t),t}return l.__extends(a,e),Object.defineProperty(a.prototype,"onChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.state.source,a=this.props.onBulkChange,t={source:void 0,options:void 0,labelField:void 0,valueField:void 0};if("api"===e){var n=this.state,l=n.api,o=n.labelField,i=n.valueField;t.source=l,t.labelField=o,t.valueField=i}a&&a(t)}}),Object.defineProperty(a.prototype,"handleSourceChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setState({source:e},this.onChange)}}),Object.defineProperty(a.prototype,"handleAPIChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setState({api:e},this.onChange)}}),Object.defineProperty(a.prototype,"handleLableFieldChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setState({labelField:e},this.onChange)}}),Object.defineProperty(a.prototype,"handleValueFieldChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setState({valueField:e},this.onChange)}}),Object.defineProperty(a.prototype,"buildBatchAddSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{type:"action",actionType:"dialog",label:u.i18n("22de6ef85ed60ec54dbdc1d8583e5104"),dialog:{title:u.i18n("421252e16c6cb544fe9ce0be94a190e0"),headerClassName:"font-bold",closeOnEsc:!0,closeOnOutside:!1,showCloseButton:!0,body:[{type:"alert",level:"warning",body:[{type:"tpl",tpl:u.i18n("c130bd5b55edefdaf8923269e9a52439")}],showIcon:!0,className:"mb-2.5"},{type:"form",wrapWithPanel:!1,mode:"normal",wrapperComponent:"div",resetAfterSubmit:!0,autoFocus:!0,preventEnterSubmit:!0,horizontal:{left:0,right:12},body:[{name:"batchOption",type:"textarea",label:"",placeholder:u.i18n("1e2f96a69fbef8caa8823a3067ebbdc7"),trimContents:!0,minRows:10,maxRows:50,required:!0}]}]}}}}),Object.defineProperty(a.prototype,"renderHeader",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,a=this,t=this.props,n=t.render,o=t.label,i=t.labelRemark,r=t.useMobileUI,d=t.env,c=t.popOverContainer,p=null===(e=null==d?void 0:d.theme)||void 0===e?void 0:e.classPrefix,f=this.state.source,h=[{label:u.i18n("01820262aa9ad5b130f8f5b86bfd2968"),value:"custom"},{label:u.i18n("c8158b3cad598b0b5939788ca4efb298"),value:"api"}].map((function(e){return l.__assign(l.__assign({},e),{onClick:function(){return a.handleSourceChange(e.value)}})}));return b.default.createElement("header",{className:"ae-OptionControl-header"},b.default.createElement("label",{className:s.default("".concat(p,"Form-label"))},o||"",i?n("label-remark",{type:"remark",icon:i.icon||"warning-mark",tooltip:i,className:s.default("Form-lableRemark",null==i?void 0:i.className),useMobileUI:r,container:c||(d&&d.getModalContainer?d.getModalContainer:void 0)}):null),b.default.createElement("div",null,n("validation-control-addBtn",{type:"dropdown-button",level:"link",size:"sm",label:"${selected}",align:"right",closeOnClick:!0,closeOnOutside:!0,buttons:h},{popOverContainer:null,data:{selected:h.find((function(e){return e.value===f})).label}})))}}),Object.defineProperty(a.prototype,"renderApiPanel",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props.render,a=this.state,t=a.source,n=a.api,l=a.labelField,o=a.valueField;return"api"!==t?null:e("api",r.getSchemaTpl("apiControl",{label:u.i18n("54ea89b497ec3bb319c68844dfa3687f"),name:"source",className:"ae-ExtendMore",visibleOn:"data.autoComplete !== false",value:n,onChange:this.handleAPIChange,footer:[{label:r.tipedLabel(u.i18n("7e9c83e86beb612377a94e6e8d1fc644"),u.i18n("26ff46d82166741297ce666b2792af85")),type:"input-text",name:"labelField",value:l,placeholder:u.i18n("6d4ce0631f37676a887c9599691fabec"),onChange:this.handleLableFieldChange},{label:u.i18n("2e01f5f5889e33d003bec7857cd38445"),type:"input-text",name:"valueField",value:o,placeholder:u.i18n("959c27193eb0a41d01f4b53dcc4b9245"),onChange:this.handleValueFieldChange}]}))}}),Object.defineProperty(a.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,a=this.state,t=a.source,n=a.api,o=a.labelField,i=a.valueField,r=this.props.className,d=l.__assign(l.__assign({},this.props),{data:l.__assign({api:n,labelField:o,valueField:i},null===(e=this.props)||void 0===e?void 0:e.data)});return b.default.createElement("div",{className:s.default("ae-OptionControl",r)},this.renderHeader(),"custom"===t?b.default.createElement(p,l.__assign({},d)):null,this.renderApiPanel())}}),a}(b.default.Component))),a.default=h}));